<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <title>Multi-Step Job Application Form</title>
  <style>
    #multiStepForm {
      background-color: #fff;
      padding: 15px;
      border-radius: 15px;
      border: solid 1px #39a2f8;
      width: 100%;
      max-width: 1000px;
      margin: 30px auto;
    }

    #multiStepForm h5 {
      margin-bottom: 15px;
    }

    .step {
      display: none;
    }

    .step.active {
      display: block;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-size: 15px !important;
      font-weight: 500;
    }

    input,
    select,
    textarea {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
      border: solid 1px #ccc;
      outline: none;
      border-radius: 8px;
    }

    .small-text {
      font-size: 0.8em;
      color: gray;
    }

    .next-step-button {
      background-color: #39a2f8;
      padding: 10px 30px;
      border-radius: 13px;
      font-size: 15px;
      font-weight: 500;
      border: solid 1px #39a2f8;
      transition: 0.5s all ease-in-out;
    }

    .back-step-button {
      background-color: #fff;
      color: #39a2f8;
      padding: 10px 30px;
      border-radius: 13px;
      font-size: 15px;
      font-weight: 500;
      border: solid 1px #39a2f8;
      transition: 0.5s all ease-in-out;
    }

    .add-experience-btn {
      color: #39a2f8;
      font-size: 17px;
      font-weight: 600;
      background-color: #fff;
      border: none;
    }

  </style>
</head>

<body>
<div style="background-image: url('https://img.freepik.com/free-vector/ombre-blue-curve-light-blue-background_53876-173299.jpg?semt=ais_hybrid&w=740');background-size: cover;height:100px">
  <h3 class="p-4">Onboarding Form</h3>
</div>
<div class="container-fluid">
  <form id="multiStepForm" action="/jobForm" method="POST" enctype="multipart/form-data">


    <!-- Step 1: Personal Details -->  
    <div class="step active" id="step1">
      <h5>Step 1: Personal Details</h5>
      <div class="row">
        <input type="hidden" name="link" id="link" value="<%=  %>">
          <div class="col-md-12 col-12">
          <div class="form-group"><label>Full Name:</label><input type="text" name="fullName" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Father's Name:</label><input type="text" name="fatherName" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Mother's Name:</label><input type="text" name="motherName" required></div>
        </div>
        <div class="col-md-12 col-12">
          <div class="form-group"><label>Email Address:</label><input type="email" name="email" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Mobile Number:</label><input type="tel" name="number" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Alternate Mobile Number:</label><input type="tel" name="AlternateNumber"></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Father's Mobile Number:</label><input type="tel" name="fatherNumber" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Mother's Mobile Number:</label><input type="tel" name="motherNumber" required></div>
        </div>
        <h5>Current Address</h5>
        <div class="col-md-12 col-12">
          <div class="form-group"><label>Current Address:</label><textarea name="currentAddress"></textarea></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>City:</label>
            <select name="currentCity">
              <option value="Jaipur">Jaipur</option>
            </select>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Pincode:</label><input type="text" name="currentPincode"></div>
        </div>


        <h5 class="mt-4">Permanent Address</h5>
        <div class="col-md-12 col-12">
          <div class="d-flex gap-2 align-items-center mb-3">
            <input type="checkbox" id="sameAddress" onclick="copyAddress()" style="width:15px" >
            <label for="sameAddress" class="mb-0">Same as Current Address</label>
          </div>
        </div>
       </div>
        <!-- Permanent Address Section -->
        <div id="permanentAddressFields">
          <div class="row">
            <div class="col-md-12 col-12">
              <div class="form-group"><label>Address:</label><textarea name="permanentAddress"></textarea></div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group"><label>City:</label>
                <select name="permanentCity">
                  <option value="Jaipur">Jaipur</option>
                </select>
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group"><label>Pincode:</label><input type="text" name="permanentPincode"></div>
            </div>
          </div>
        </div>
     

      <div class="mt-4">
        <button type="button" onclick="nextStep(1)" class="next-step-button">Next</button>
      </div>
    </div>

    <!-- Step 2: Document Uploading -->
    <div class="step" id="step2">
      <h5>Step 2: Document Uploading</h5>
      <div class="row">
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Pan Card Front:</label><input type="file" name="panFront" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Pan Card Back:</label><input type="file" name="panBack" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Aadhar Card Front:</label><input type="file" name="aadharFront" required ></div>
        </div>

        <div class="col-md-6 col-12">
          <div class="form-group"><label>Aadhar Card Back:</label><input type="file" name="aadharBack" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>10th Marksheet:</label><input type="file" name="marksheet10" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>12th Marksheet:</label><input type="file" name="marksheet12" required></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label>Last Qualification:</label>
            <input type="text" name="lastQualification" required>
          </div>
        </div>

        <div class="col-md-6 col-12">
          <div class="form-group"><label>Upload Last Qualification Marksheet:</label><input type="file"
              name="lastQualificationMarksheet"></div>
        </div>

        <div class="col-md-12 col-12">
          <div class="form-group">
            <label>Are you:</label>
            <div class="d-flex gap-2 align-items-center">
              <div class="d-flex gap-2 align-items-center"><input type="radio" name="experienceType" value="fresher"
                  onclick="toggleExperience(true)"> <span>Fresher</span></div>
              <div class="d-flex gap-2 align-items-center"><input type="radio" name="experienceType" value="experienced"
                  onclick="toggleExperience(false)"> <span>Experienced</span></div>
            </div>

          </div>

        </div>
      </div>
      <div class="mt-4">
        <button type="button" onclick="prevStep(0)" class="back-step-button">Back</button>
        <button type="button" onclick="nextStep(2)" class="next-step-button">Next</button>
      </div>
    </div>

    <!-- Step 3: Professional Background -->
    <div class="step" id="step3">
      <h5>Step 3: Professional Background</h5>
      <div id="fresherSection" style="display: none;">
        <label>Upload Your CV:</label>
        <input type="file" name="fresherCV"  >
        <div class="small-text">*pdf, doc, jpg, png</div>
      </div>

      <div id="experiencedSection" style="display: none;">
        <div class="row">
          <div class="col-md-6 col-12">
            <div class="form-group"><label>Company Name:</label><input type="text" name="companyName"></div>
          </div>
          <div class="col-md-6 col-12">
            <div class="form-group"><label>Job Role/Position:</label><input type="text" name="jobRole"></div>
          </div>
          <div class="col-md-12 col-12">
            <div class="form-group"><label>Location:</label><input type="text" name="location"></div>
          </div>
          <div class="col-md-6 col-12">
            <div class="form-group"><label>Joining Date:</label><input type="date" name="joiningDate"></div>
          </div>
          <div class="col-md-6 col-12">
            <div class="form-group"><label>End Date:</label><input type="date" name="endDate"></div>
          </div>
          <div class="col-md-12 col-12">
            <div class="form-group"><label>Total Experience</label><input type="text" name="totalExperience"
                ></div>
          </div>
        </div>
        <div id="experienceContainer"></div>
        <button type="button" onclick="addExperience()" class="add-experience-btn mt-3 mb-3">+ Add Experience</button>

        <div class="form-group">
          <label>Upload Your CV/Resume</label>
          <input type="file" name="resume">
          <div class="small-text">*pdf, doc, jpg, png</div>
        </div>
      </div>
        
      <div class="mt-4">
        <button type="button" onclick="prevStep(1)" class="back-step-button">Back</button>
        <button type="button" onclick="nextStep(3)" class="next-step-button">Next</button>
      </div>
    </div>

    <!-- Step 4: Job Role in A2G -->
    <div class="step" id="step4">
    
      <h5>Step 4: Job Role in A2G</h5>
        <div class="company-header-container">
          <img src="https://static.vecteezy.com/system/resources/previews/008/214/517/non_2x/abstract-geometric-logo-or-infinity-line-logo-for-your-company-free-vector.jpg" alt="image" style="width:100%;max-width: 150px;object-fit: cover;">
      </div>
      <div class="row">
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label>Select Job Profile:</label>
            <select name="jobProfile">
              <option>Sales Executive</option>
              <option>HR Associate</option>
              <option>Marketing Coordinator</option>
            </select>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Salary Offered:</label><input type="text" name="salary"></div>
        </div>
        <div class="col-md-12 col-12">
          <div class="form-group"><label>Referred by (HR Name):</label><input type="text" name="referredBy"></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group"><label>Interview Date:</label><input type="date" name="interviewDate"></div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label>Interview Type:</label>
            <select name="interviewType">
              <option>Telephone</option>
              <option>Video Call</option>
              <option>In Person</option>
            </select>
          </div>
        </div>
      </div>

   <small> <input type="checkbox" id="agree" style=" width:10px;"> I agree to the
          <a href="#" target="_blank">Privacy Policy</a> and
          <a href="#" target="_blank">Terms & Conditions</a>.
        </small>
      <div class="mt-4">
        <button type="button" onclick="prevStep(2)" class="back-step-button">Back</button>
        <button type="button" onclick="showPopup()" class="next-step-button">Submit</button>
      </div>
    </div>

  </form>
</div>
  <!-- Popup -->
  <div id="popupAccept"
    style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5);padding:5px">
    <div style="background:#fff; margin:100px auto; padding:20px; width:100%;max-width: 500px;">
      <div class="text-center">
         <img src="https://cdn2.iconfinder.com/data/icons/greenline/512/check-512.png" alt="icon" style="width:100%;max-width: 80px;">
        <h5 class="mt-3 mb-4">Your form has been submitted. Our HR will contact you soon.</h5>
      </div>
      <div><button onclick="submitForm()" class="next-step-button w-100 mt-3">Submit</button></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
    crossorigin="anonymous"></script>
  <script>
    let currentStep = 0;
    const steps = document.querySelectorAll('.step');

    function nextStep(index) {
      steps[currentStep].classList.remove('active');
      currentStep = index;
      steps[currentStep].classList.add('active');
    }

    function prevStep(index) {
      steps[currentStep].classList.remove('active');
      currentStep = index;
      steps[currentStep].classList.add('active');
    }

    function copyAddress() {
      if (document.getElementById('sameAddress').checked) {
        document.querySelector('[name="permanentAddress"]').value = document.querySelector('[name="currentAddress"]').value;
        document.querySelector('[name="permanentCity"]').value = document.querySelector('[name="currentCity"]').value;
        document.querySelector('[name="permanentPincode"]').value = document.querySelector('[name="currentPincode"]').value;
      } else {
        document.querySelector('[name="permanentAddress"]').value = "";
        document.querySelector('[name="permanentCity"]').value = "";
        document.querySelector('[name="permanentPincode"]').value = "";
      }
    }

    function toggleExperience(isFresher) {
      document.getElementById('fresherSection').style.display = isFresher ? 'block' : 'none';
      document.getElementById('experiencedSection').style.display = isFresher ? 'none' : 'block';
    }

    function addExperience() {
      const container = document.getElementById('experienceContainer');
      const div = document.createElement('div');
      div.classList.add('experience-block');
      div.innerHTML = `
        <hr>
          <div class="row">
          <div class="col-md-6 col-12">
              <div class="form-group"><label>Company Name:</label><input type="text" name="companyName[]"></div>
          </div>
          <div class="col-md-6 col-12">
             <div class="form-group"><label>Job Role/Position:</label><input type="text" name="jobRole[]"></div>
          </div>
          <div class="col-md-12 col-12">
            <div class="form-group"><label>Location:</label><input type="text" name="location[]"></div>
          </div>
          <div class="col-md-6 col-12">
               <div class="form-group"><label>Joining Date:</label><input type="date" name="joiningDate[]"></div>
          </div>
          <div class="col-md-6 col-12">
          <div class="form-group"><label>End Date:</label><input type="date" name="endDate[]"></div>
          </div>
          <div class="col-md-12 col-12">
            <div class="form-group"><label>Total Experience (Days):</label><input type="text" name="totalExperience[]" readonly></div>
          </div>
        </div>
        `;
      container.appendChild(div);
    }

    function showPopup() {
      document.getElementById('popupAccept').style.display = 'block';
    }

    function submitForm() {
      const agree = document.getElementById('agree');
      if (!agree.checked) {
        alert('Please agree to the Privacy Policy and Terms & Conditions.');
        return;
      }
      alert('Form submitted successfully!');
      document.getElementById('multiStepForm').submit();
    }

    function copyAddress() {
      const isChecked = document.getElementById('sameAddress').checked;
      const permanentFields = document.getElementById('permanentAddressFields');

      if (isChecked) {
        document.querySelector('[name="permanentAddress"]').value = document.querySelector('[name="currentAddress"]').value;
        document.querySelector('[name="permanentCity"]').value = document.querySelector('[name="currentCity"]').value;
        document.querySelector('[name="permanentPincode"]').value = document.querySelector('[name="currentPincode"]').value;
        permanentFields.style.display = 'none';
      } else {
        document.querySelector('[name="permanentAddress"]').value = "";
        document.querySelector('[name="permanentCity"]').value = "";
        document.querySelector('[name="permanentPincode"]').value = "";
        permanentFields.style.display = 'block';
      }
    }

    // Ensure initial state is correct without using onload
    document.addEventListener('DOMContentLoaded', function () {
      copyAddress();
    });
  </script>

  <script>
    async function submitForm() {
  const agree = document.getElementById('agree');
  if (!agree.checked) {
    alert('Please agree to the Privacy Policy and Terms & Conditions.');
    return;
  }

 s[pathParts.length - 1];
console.log(link)
  const form = document.getElementById('multiStepForm');
  console.log("form--->",form)
  const formData = new FormData(form);
   console.log("formData--->",formData)
  try {
    const response = await fetch(`/jobForm`, {
      method: 'POST',
      body: formData,
    });

    const result = await response.json();
    
    if (response.ok) {
      form.reset(); // Clear form after successful submission
      window.location.reload(); // Reload if needed
    } else {
      alert(result.message || 'Something went wrong. Try again.');
    }
  } catch (error) {
    console.error('Submission error:', error);
    alert('An error occurred. Please try again.');
  }
}

function nextStep(index) {
  const currentForm = steps[currentStep]; // Current step's element
  const requiredFields = currentForm.querySelectorAll('input[required], select[required], textarea[required]');
  let isValid = true;
  requiredFields.forEach(field => {
    if (!field.value.trim()) {
      field.style.border = "1px solid red";
      isValid = false;
    } else {
      field.style.border = "1px solid #ccc";
    }
  });
  if (!isValid) {
    alert("Please fill all required fields before proceeding.");
    return;
  }
  steps[currentStep].classList.remove('active');
  currentStep = index;
  steps[currentStep].classList.add('active');
}
  </script>
</body>
</html>